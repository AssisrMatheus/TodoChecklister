<Ui xmlns="http://www.blizzard.com/wow/ui/" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
  <Script file="ResponsiveFrame.lua"/>

  <Frame name="TodoChecklisterResponsiveFrameTemplate" resizable="true" enableMouse="true" movable="true" topLevel="true" hidden="true" inherits="UIPanelDialogTemplate" virtual="true">
    <Size x="250" y="300"/>

    <Scripts>
      <OnLoad>
        OnLoad(self)
      </OnLoad>      
    </Scripts>

    <Layers>
      <Layer level="OVERLAY">
        <FontString parentKey="Title" inherits="GameFontHighlight">
          <Anchors>
            <Anchor point="LEFT" relativeTo="$parentTitleBG" relativePoint="LEFT">
              <Offset x="6" y="0"/>
            </Anchor>
          </Anchors>
        </FontString>
      </Layer>
    </Layers>

    <Frames>
      <Button name="$parentResize">
        <Size x="16" y="16"/>

        <Anchors>
          <Anchor point="BOTTOMRIGHT">
            <Offset x="-5" y="7"/>
          </Anchor>
        </Anchors>

        <Scripts>
          <OnMouseDown>
						if button == "LeftButton" then
              self.isSizing = true
              self:GetParent():StartSizing("BOTTOMRIGHT")
              self:GetParent():SetUserPlaced(true)
            elseif button == "RightButton" then
              self.isScaling = true
            end
          </OnMouseDown>
          <OnMouseUp>
						if button == "LeftButton" then
              self.isSizing = false
              self:GetParent():StopMovingOrSizing()
            elseif button == "RightButton" then
              self.isScaling = false
            end
          </OnMouseUp>
          <OnUpdate>
						if self.isScaling == true then
              local cx, cy = GetCursorPosition()
              cx = cx / self:GetEffectiveScale() - self:GetParent():GetLeft() 
              cy = self:GetParent():GetHeight() - (cy / self:GetEffectiveScale() - self:GetParent():GetBottom() )
  
              local tNewScale = cx / self:GetParent():GetWidth()
              local tx, ty = self:GetParent().x / tNewScale, self:GetParent().y / tNewScale
              
              self:GetParent():ClearAllPoints()
              self:GetParent():SetScale(self:GetParent():GetScale() * tNewScale)
              self:GetParent():SetPoint("BOTTOMLEFT", UIParent, "BOTTOMLEFT", tx, ty)
              self:GetParent().x, self:GetParent().y = tx, ty
            end
          </OnUpdate>
        </Scripts>

        <NormalTexture file="Interface\ChatFrame\UI-ChatIM-SizeGrabber-Up" setAllPoints="true"/>
        <PushedTexture file="Interface\ChatFrame\UI-ChatIM-SizeGrabber-Down" setAllPoints="true"/>
        <HighlightTexture file="Interface\ChatFrame\UI-ChatIM-SizeGrabber-Highlight" alphaMode="ADD" setAllPoints="true"/>
      </Button>
    </Frames>
  </Frame>
</Ui>
